# generated by datamodel-codegen:
#   filename:  capabilities/defs.schema.json
#   timestamp: 2025-11-15T17:03:14+00:00

from __future__ import annotations

from enum import Enum
from typing import Any, List, Optional

from pydantic import BaseModel, Extra, Field


class SharedDefinitions(BaseModel):
    pass


class JsonSchemaFragment(BaseModel):
    pass

    class Config:
        extra = Extra.allow


class Parameter(BaseModel):
    class Config:
        extra = Extra.allow

    name: str = Field(..., description='Parameter name.')
    type: str = Field(
        ..., description='Expected parameter data type (string, number, boolean, etc.).'
    )
    description: Optional[str] = Field(
        None, description='Human-readable explanation of the parameter.'
    )
    required: Optional[bool] = Field(
        None, description='Whether the parameter must be provided by the caller.'
    )
    default: Optional[Any] = Field(
        None, description='Optional default value used if the parameter is omitted.'
    )


class Handler(BaseModel):
    class Config:
        extra = Extra.forbid

    module: str = Field(..., description='Path to the module exporting the resolver.')
    method: str = Field(..., description='Exported method or function name to invoke.')


class Kind(Enum):
    cpu = 'cpu'
    gpu = 'gpu'


class Runtime(BaseModel):
    class Config:
        extra = Extra.allow

    kind: Kind = Field(
        ...,
        description='Execution plane: cpu or gpu. Node-plane capabilities always use cpu.',
    )
    timeoutSeconds: Optional[float] = Field(
        None, description='Execution timeout guard in seconds.'
    )
    concurrency: float = Field(
        ..., description='Maximum allowed concurrent invocations.'
    )


class Telemetry(BaseModel):
    class Config:
        extra = Extra.allow

    emitsProgressEvents: Optional[bool] = Field(
        None, description='Whether this capability emits progress events.'
    )
    metrics: Optional[List[str]] = Field(
        None, description='List of metric identifiers emitted during execution.'
    )


class Security(BaseModel):
    class Config:
        extra = Extra.allow

    requiresSecrets: Optional[bool] = Field(
        None,
        description='Whether this capability requires access to secrets or secure credentials.',
    )


class Contracts(BaseModel):
    class Config:
        extra = Extra.allow

    idempotent: Optional[bool] = Field(
        None,
        description='Whether invoking the capability multiple times produces the same result.',
    )
    sideEffects: Optional[str] = Field(
        None,
        description='Description of any operational side effects (e.g., persistent-storage-write).',
    )

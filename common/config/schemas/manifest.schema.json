{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "manifest.schema.json",
    "title": "Capabilities Manifest",
    "description": "A merged capabilities manifest combining both the control plane and worker plane capabilities.",
    "type": "object",
    "properties": {
        "generatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp representing when the combined manifest was assembled."
        },
        "capabilities": {
            "type": "array",
            "description": "All capabilities across all execution planes.",
            "items": {
                "$ref": "capability.schema.json#"
            }
        },
        "sources": {
            "type": "object",
            "description": "Metadata describing how many capabilities originated from each plane.",
            "properties": {
                "control": {
                    "type": "object",
                    "description": "Source information for the control plane (node).",
                    "properties": {
                        "plane": {
                            "type": "string",
                            "enum": [
                                "node"
                            ],
                            "description": "Source plane identifier."
                        },
                        "number": {
                            "type": "number",
                            "description": "Number of capabilities contributed by the control plane."
                        }
                    },
                    "required": [
                        "plane",
                        "number"
                    ]
                },
                "worker": {
                    "type": "object",
                    "description": "Source information for the worker plane (python).",
                    "properties": {
                        "plane": {
                            "type": "string",
                            "enum": [
                                "python"
                            ],
                            "description": "Source plane identifier."
                        },
                        "number": {
                            "type": "number",
                            "description": "Number of capabilities contributed by the worker plane."
                        }
                    },
                    "required": [
                        "plane",
                        "number"
                    ]
                }
            },
            "required": [
                "control",
                "worker"
            ],
            "additionalProperties": false
        }
    },
    "required": [
        "generatedAt",
        "capabilities",
        "sources"
    ],
    "additionalProperties": false
}